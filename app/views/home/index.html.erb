<%= render "layouts/header" %>
<section id="topBanner">
    <% if @bannerProduct %>
        <div id="banner">
            <img class="bannerImage img-thumbnail figure-img img-fluid rounded" src="<%= @bannerProduct.photoURL %>">
            <div class="bannerInfo">
                <div class="bannerInfoText">
                    <h1><%= @bannerProduct.name %></h1>
                    <h2><%= number_to_currency(@bannerProduct.price) %></h2>
                </div>
                  <%= button_to "+", savedlist_path(@bannerProduct.id), method: :put, :class => "btn btn-primary btn-lg" %>
            </div>
        </div>
    <% end %>
    <div id="popular" class=" pb-5 d-block">
        <h1>Popular Items</h1>
        <div class="d-flex flex-row flex-wrap justify-content-around">
            <% @popularItems.each do |product| %>
                    <%= render 'products/product', item: product %> 
            <% end %>
        </div>
    </div>
    
    <h1 class="my-2 d-block">Collections</h1>
    <div class="collections">
        <% @collections.each do |collection| %>
            <%= link_to category_path(collection.id), {class: 'collection-link'} do %>
                <div class="card" style="width: 18rem;">
                    <% if collection.products.count > 0 %>
                        <img src="<%= collection.products.first.photoURL %>" class="card-img-top" alt="...">
                    <% else %>
                        <div class="card-img-top"></div>
                    <% end %>
                    <div class="card-body" >
                        <h5 class="card-title"><%= collection.name %> - <%= collection.products.count%> items</h5>
                    </div>
                </div>
            <% end %>
        <% end %>
    </div>
    <section class="bg-dark text-center p-5 mt-4">
        <div class="newsletter container p-3">
            <h3 class="text-white">Newsletter</h3>
            <p class="text-white">Signup with our Newsletter</p>
            <% flash.each do |name, msg| %>
                <div class='alert alert-<%= name %>'>
                    <%= msg %>
                </div>
            <% end %>
            <%= form_with url: home_newsletter_path do |form| %> 
                <div class="input-group input-group-lg pt-2 d-inline">
                <%= form.text_field :email %>
                </div>
                <%= form.submit "Send Email", { class: "btn btn-light btn-sm"} %>
            <% end %>
        </div>
    </section>
</section>
